{"version":3,"file":"otab.js","sources":["../src/o-tab.js"],"sourcesContent":["/**\n * ------------------------------------------------------------------------------------------------------\n * Boosted (v4.5.3): otab.js\n * Licensed under MIT (https://github.com/Orange-OpenSource/Orange-Boosted-Bootstrap/blob/master/LICENSE)\n * ------------------------------------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'otab'\nconst VERSION = '4.5.3'\nconst DATA_KEY = 'bs.otab'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\nconst DEFAULT_THRESHOLD = 2\n\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_ACCORDION_LAYOUT = 'accordion-layout'\n\nconst SELECTOR_OTAB_HEADING = '.o-tab-heading'\nconst SELECTOR_OTAB_CONTENT = '.o-tab-content'\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Otab {\n  constructor(element) {\n    this._element = element\n    this._addAccessibility()\n\n    if ($(this._element).parent().find(SELECTOR_OTAB_HEADING).length > DEFAULT_THRESHOLD) {\n      $(this._element).parent().addClass(CLASS_NAME_ACCORDION_LAYOUT)\n    }\n  }\n\n  // getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  // public\n  show() {\n    const $element = $(this._element)\n\n    if ($element.next().hasClass(CLASS_NAME_SHOW)) {\n      return\n    }\n\n    // from parent remove all tab-content show classes\n    $element.parent().find(SELECTOR_OTAB_CONTENT).removeClass(CLASS_NAME_SHOW)\n    // remove all aria-expanded=true\n    $element.parent().find('[aria-expanded=\"true\"]').attr('aria-expanded', false)\n    // add show class to next tab-content\n    $element.next().addClass(CLASS_NAME_SHOW)\n    // add aria-expanded=true to element\n    $element.attr('aria-expanded', true)\n  }\n\n  // private\n\n  _addAccessibility() {\n    const $tab = $(this._element)\n    const $tabpanel = $tab.next()\n\n    $tab.attr('id', Util.getUID(NAME))\n    $tabpanel.attr('id', Util.getUID(NAME))\n\n    $tab.attr({\n      'aria-controls': $tabpanel.attr('id'),\n      role: 'tab'\n    })\n    $tabpanel.attr({\n      'aria-labelledby': $tab.attr('id'),\n      role: 'tabpanel',\n      tabindex: 0\n    })\n\n    if ($tabpanel.hasClass(CLASS_NAME_SHOW)) {\n      $tab.attr('aria-expanded', true)\n    } else {\n      $tab.attr('aria-expanded', false)\n    }\n  }\n\n  // static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      const $this = $(this)\n      let data = $this.data(DATA_KEY)\n\n      if (!data) {\n        data = new Otab(this)\n        $this.data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(document)\n  .on('DOMContentLoaded', () => {\n    Otab._jQueryInterface.call($(SELECTOR_OTAB_HEADING))\n  })\n  .on(EVENT_CLICK_DATA_API, SELECTOR_OTAB_HEADING, function (event) {\n    event.preventDefault()\n    Otab._jQueryInterface.call($(this), CLASS_NAME_SHOW)\n  })\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = Otab._jQueryInterface\n$.fn[NAME].Constructor = Otab\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Otab._jQueryInterface\n}\n\nexport default Otab\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","DEFAULT_THRESHOLD","EVENT_CLICK_DATA_API","CLASS_NAME_SHOW","CLASS_NAME_ACCORDION_LAYOUT","SELECTOR_OTAB_HEADING","SELECTOR_OTAB_CONTENT","Otab","element","_element","_addAccessibility","parent","find","length","addClass","show","$element","next","hasClass","removeClass","attr","$tab","$tabpanel","Util","getUID","role","tabindex","_jQueryInterface","config","each","$this","data","TypeError","document","on","call","event","preventDefault","Constructor","noConflict"],"mappings":"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"}